<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>İlker ❤ Bahargül — Şarkılar</title>

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YBDYWZSF9B"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-YBDYWZSF9B');
</script>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root{--accent:#d64b74;--muted:#6b6470;--panel: rgba(255,255,255,0.95);--shadow:0 20px 60px rgba(10,10,20,0.06)}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:'Poppins',system-ui;background:#fff}
body::before{content:"";position:fixed;inset:0;background:url('Bahoş.jpg') center/cover fixed;z-index:-2}
body::after{content:"";position:fixed;inset:0;background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.96));z-index:-1}

.header{max-width:1100px;margin:84px auto 12px;padding:16px}
.hambutton{position:fixed;left:14px;top:14px;z-index:1200;background:rgba(255,255,255,0.9);border:0;padding:10px;border-radius:12px;box-shadow:var(--shadow);cursor:pointer}
.sidebar{position:fixed;left:0;top:0;bottom:0;width:0;overflow:hidden;background:rgba(255,255,255,0.95);transition:width .36s;z-index:1190}
.container{max-width:1100px;margin:18px auto;padding:16px}

.player{background:var(--panel);padding:14px;border-radius:14px;box-shadow:var(--shadow);display:grid;grid-template-columns:120px 1fr;gap:12px;align-items:center}
.cover{width:100%;height:100px;border-radius:10px;overflow:hidden}
.cover img{width:100%;height:100%;object-fit:cover}
.meta strong{display:block}
.controls{display:flex;gap:8px;align-items:center;margin-top:8px}
.btn{background:#fff;border:0;padding:8px;border-radius:10px;box-shadow:0 10px 30px rgba(0,0,0,0.06);cursor:pointer}
.playlist{margin-top:12px;display:flex;flex-direction:column;gap:8px}
.pl-item{padding:10px;border-radius:10px;background:#fff;box-shadow:0 8px 28px rgba(0,0,0,0.06);display:flex;align-items:center;gap:10px;cursor:pointer}
.pl-item.active{outline:3px solid rgba(214,75,116,0.08)}
iframe{width:100%;height:220px;border:0;border-radius:12px}
@media(max-width:700px){ iframe{height:200px} .player{grid-template-columns:1fr} .cover{height:120px} }
</style>
</head>
<body>

<button class="hambutton" id="menuBtn">☰ Menü</button>
<aside id="sidebar" class="sidebar" aria-hidden="true">
  <nav style="margin-top:72px;display:flex;flex-direction:column;padding:12px;gap:8px">
    <a href="index.html">🏠 Ana Sayfa</a>
    <a href="anilar.html">📸 Anılar</a>
    <a href="zaman.html">⏳ Zaman</a>
    <a href="sarkilar.html" style="background:linear-gradient(90deg,var(--accent),#b33e62);color:#fff;padding:12px;border-radius:10px">🎶 Şarkılar</a>
    <a href="gokyuzu.html">🌌 Gökyüzü</a>
    <a href="masal.html">📚 Masal</a>
    <a href="dogum.html">🎂 Doğum Günü</a>
  </nav>
</aside>

<main class="header">
  <h2>🎵 Şarkılar</h2>
  <p style="color:#6b6470;margin-top:6px">Seçili klipler (YouTube embed). Mobil için optimize edildi; reklam çıkabilir, bu yüzden yerel mp3 fallback de mevcut.</p>

  <div class="container">
    <div class="player" aria-label="Müzik oynatıcı">
      <div class="cover"><img id="coverImg" src="Bahar.jpg" alt="Kapak"></div>
      <div>
        <div class="meta">
          <strong id="trackTitle">Dilerim Ki</strong>
          <div id="trackArtist" style="color:var(--muted);font-size:13px">Dolu Kadehi Ters Tut</div>
        </div>

        <div class="controls">
          <button class="btn" id="prev">⟨</button>
          <button class="btn" id="play">▶</button>
          <button class="btn" id="next">⟩</button>
          <div style="flex:1"></div>
          <button class="btn" id="toggleSource">YouTube / Yerel</button>
        </div>

        <div style="margin-top:10px">
          <div id="videoWrap"><iframe id="ytPlayer" src="https://www.youtube.com/embed/PHd-3PSQ6X4?rel=0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>
          <audio id="localAudio" style="display:none;width:100%" controls>
            <source src="dolu-kadehi-ters-tut-dilerim-ki.mp3" type="audio/mpeg">
            Tarayıcınız bu ses formatını desteklemiyor.
          </audio>
        </div>
      </div>
    </div>

    <div class="playlist" id="playlist">
      <!-- playlist items -->
      <div class="pl-item active" data-type="yt" data-src="https://www.youtube.com/embed/PHd-3PSQ6X4?rel=0" data-title="Dilerim Ki" data-artist="Dolu Kadehi Ters Tut" data-cover="Bahar.jpg">▶ Dilerim Ki — Dolu Kadehi Ters Tut</div>

      <div class="pl-item" data-type="yt" data-src="https://www.youtube.com/embed/UHqAMvIvg3o?rel=0" data-title="Mavi Gri" data-artist="Mavi Gri - O Ben Olamam" data-cover="Bahar.jpg">▶ Mavi Gri — O Ben Olamam</div>

      <div class="pl-item" data-type="yt" data-src="https://www.youtube.com/embed/lne_nTg1M_o?rel=0" data-title="Aylardan Mayıs" data-artist="Göksel İpekçi" data-cover="Bahar.jpg">▶ Aylardan Mayıs — Göksel İpekçi</div>

      <!-- local fallback example -->
      <div class="pl-item" data-type="local" data-src="sesdosya.mp3" data-title="Yerel Şarkı" data-artist="—" data-cover="Bahar.jpg">▶ Yerel — sesdosya.mp3</div>
    </div>
  </div>
</main>

<script>
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
menuBtn.addEventListener('click', ()=> sidebar.classList.toggle('open'));

const playlistEls = [...document.querySelectorAll('.pl-item')];
const ytPlayer = document.getElementById('ytPlayer');
const localAudio = document.getElementById('localAudio');
const coverImg = document.getElementById('coverImg');
const trackTitle = document.getElementById('trackTitle');
const trackArtist = document.getElementById('trackArtist');
const playBtn = document.getElementById('play');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const toggleSource = document.getElementById('toggleSource');

let cur = 0;
let sourceMode = 'yt'; // 'yt' or 'local'

function loadTrack(i){
  playlistEls.forEach(e=> e.classList.remove('active'));
  playlistEls[i].classList.add('active');
  const type = playlistEls[i].dataset.type;
  const src = playlistEls[i].dataset.src;
  const title = playlistEls[i].dataset.title;
  const artist = playlistEls[i].dataset.artist;
  const cover = playlistEls[i].dataset.cover;
  trackTitle.textContent = title || '—';
  trackArtist.textContent = artist || '';
  coverImg.src = cover || 'Bahar.jpg';

  if(type === 'yt') {
    ytPlayer.src = src + (src.includes('?') ? '&autoplay=1' : '?autoplay=1');
    localAudio.style.display = 'none';
    ytPlayer.style.display = 'block';
  } else {
    localAudio.src = src;
    localAudio.style.display = 'block';
    ytPlayer.style.display = 'none';
  }
  cur = i;
}

playlistEls.forEach((el,i)=>{
  el.addEventListener('click', ()=> { loadTrack(i); });
});

// default load
loadTrack(0);

playBtn.addEventListener('click', ()=>{
  // if yt iframe visible, we can't directly toggle via iframe without API, so simulate by reloading autoplay
  const active = playlistEls[cur].dataset.type;
  if(active === 'yt'){
    // toggle by reassigning src (very simple)
    const src = ytPlayer.src;
    if(src.includes('autoplay=1')) {
      // pause: remove autoplay param and reload
      ytPlayer.src = src.replace('&autoplay=1','').replace('?autoplay=1','');
      playBtn.textContent = '▶';
    } else {
      ytPlayer.src = ytPlayer.src + (ytPlayer.src.includes('?') ? '&autoplay=1' : '?autoplay=1');
      playBtn.textContent = '❚❚';
    }
  } else {
    if(localAudio.paused){ localAudio.play(); playBtn.textContent='❚❚'; } else { localAudio.pause(); playBtn.textContent='▶'; }
  }
});

prevBtn.addEventListener('click', ()=> {
  cur = (cur-1+playlistEls.length)%playlistEls.length; loadTrack(cur);
});
nextBtn.addEventListener('click', ()=> {
  cur = (cur+1)%playlistEls.length; loadTrack(cur);
});

toggleSource.addEventListener('click', ()=>{
  sourceMode = sourceMode === 'yt' ? 'local' : 'yt';
  toggleSource.textContent = sourceMode === 'yt' ? 'YouTube / Yerel' : 'YouTube / Yerel';
  // if current item is yt and user toggles, still keep item type. We keep the toggle as user preference.
});

/* ensure local audio play/pause sync */
localAudio.addEventListener('play', ()=> playBtn.textContent = '❚❚');
localAudio.addEventListener('pause', ()=> playBtn.textContent = '▶');
</script>

</body>
</html>
